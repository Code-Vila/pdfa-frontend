import{d as L,e as S,r as p,f as E,g as H,c as f,o as g,a as t,h as y,w as C,t as c,F as T,i as R,j as k,n as j,k as F,l as N}from"./index-C5OWx6Zv.js";import{p as A}from"./pdf-conversion-BSv3Z5My.js";import{_ as I}from"./MathCaptcha.vue_vue_type_script_setup_true_lang-C0f3w2hZ.js";import"./api-instances-vAPX33Yh.js";const $={class:"min-h-screen bg-gray-900"},U={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},O={class:"max-w-2xl mx-auto"},G={class:"card"},K={class:"card-body"},Q={key:0,class:"mt-6"},J={class:"text-lg font-medium text-gray-100 mb-4"},W={class:"space-y-3"},X={class:"flex items-center"},Y={class:"text-sm font-medium text-gray-100"},Z={class:"text-sm text-gray-500"},ee=["onClick"],te={key:0,class:"mt-4"},se={class:"mt-6 text-center"},oe=["disabled"],ae={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},re={class:"mt-8 grid grid-cols-1 md:grid-cols-3 gap-6"},ne={class:"card"},le={class:"card-body text-center"},ie={class:"text-2xl font-bold text-primary-600"},de={class:"card"},ce={class:"card-body text-center"},ue={class:"text-2xl font-bold text-green-600"},ve={class:"card"},me={class:"card-body text-center"},pe={class:"text-2xl font-bold text-gray-400"},fe={class:"mt-8 text-center"},we=L({__name:"PdfConverter",setup(ge){const i=S(),a=p([]),u=p(!1),v=p(),h=p(null),m=p(!1),_=p();E(async()=>{await b()});const b=async()=>{try{const s=await A.getUserStats();s.success&&(h.value=s.data)}catch(s){console.error("Erro ao carregar estatísticas:",s)}},q=()=>{m.value=!0},D=()=>{m.value=!1},M=s=>{const e=s.target;e.files&&(w(Array.from(e.files)),e.value="")},B=s=>{var e;(e=s.dataTransfer)!=null&&e.files&&w(Array.from(s.dataTransfer.files))},w=s=>{const e=s.filter(l=>l.type==="application/pdf");e.length!==s.length&&i.warning("Apenas arquivos PDF são aceitos"),a.value.push(...e)},z=s=>{a.value.splice(s,1),a.value.length===0&&v.value&&(v.value.value="")},V=s=>{if(s===0)return"0 Bytes";const e=1024,l=["Bytes","KB","MB","GB"],o=Math.floor(Math.log(s)/Math.log(e));return parseFloat((s/Math.pow(e,o)).toFixed(2))+" "+l[o]},P=async()=>{var s,e,l;if(a.value.length!==0){u.value=!0;try{const o=await A.convertToPdfA({files:a.value});if(o.success&&o.data&&o.data.conversions){i.success(`${o.data.conversions.length} arquivo(s) convertido(s) com sucesso!`);for(const r of o.data.conversions)if(r.download_url&&r.converted_filename){const n=document.createElement("a");n.href=r.download_url,n.download=r.converted_filename,document.body.appendChild(n),n.click(),document.body.removeChild(n)}a.value=[],v.value&&(v.value.value=""),(s=_.value)==null||s.generateNewQuestion(),await b()}else{const r=o,n=r.message||"Erro ao converter arquivos";i.error(n),r.errors&&Object.values(r.errors).flat().forEach(d=>{i.error(d)})}}catch(o){console.error("Erro na conversão:",o),((e=o.response)==null?void 0:e.status)===429?i.error("Limite diário de conversões atingido. Tente novamente amanhã."):((l=o.response)==null?void 0:l.status)===413?i.error("Arquivo muito grande. Tamanho máximo: 10MB por arquivo."):i.error("Erro ao converter arquivos. Verifique sua conexão e tente novamente.")}finally{u.value=!1}}};return(s,e)=>{var o,r,n;const l=H("router-link");return g(),f("div",$,[t("main",U,[e[13]||(e[13]=t("div",{class:"text-center mb-8"},[t("h1",{class:"text-3xl font-bold text-gray-100 mb-4"}," Conversor PDF para PDF/A "),t("p",{class:"text-lg text-gray-400 max-w-2xl mx-auto"}," Converta seus documentos PDF para o formato PDF/A de forma rápida e gratuita. O PDF/A é ideal para arquivamento de longo prazo e conformidade legal. ")],-1)),t("div",O,[t("div",G,[t("div",K,[t("div",{class:"border-2 border-dashed border-gray-600 rounded-lg p-12 text-center hover:border-primary-400 transition-colors",onDragover:e[1]||(e[1]=C(()=>{},["prevent"])),onDrop:C(B,["prevent"])},[e[3]||(e[3]=t("svg",{class:"mx-auto h-12 w-12 text-gray-400 mb-4",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48"},[t("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),e[4]||(e[4]=t("p",{class:"text-lg font-medium text-gray-100 mb-2"}," Arraste e solte seus arquivos PDF aqui ",-1)),e[5]||(e[5]=t("p",{class:"text-sm text-gray-500 mb-4"}," ou clique para selecionar arquivos ",-1)),t("input",{ref_key:"fileInputRef",ref:v,type:"file",multiple:"",accept:".pdf",onChange:M,class:"hidden"},null,544),t("button",{onClick:e[0]||(e[0]=d=>{var x;return(x=v.value)==null?void 0:x.click()}),class:"btn-primary"}," Selecionar Arquivos PDF ")],32),a.value.length>0?(g(),f("div",Q,[t("h3",J," Arquivos Selecionados ("+c(a.value.length)+") ",1),t("div",W,[(g(!0),f(T,null,R(a.value,(d,x)=>(g(),f("div",{key:x,class:"flex items-center justify-between p-3 bg-gray-800 rounded-lg border border-gray-700"},[t("div",X,[e[6]||(e[6]=t("svg",{class:"h-8 w-8 text-red-500 mr-3",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{"fill-rule":"evenodd",d:"M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z","clip-rule":"evenodd"})],-1)),t("div",null,[t("p",Y,c(d.name),1),t("p",Z,c(V(d.size)),1)])]),t("button",{onClick:xe=>z(x),class:"text-red-500 hover:text-red-700"},[...e[7]||(e[7]=[t("svg",{class:"h-5 w-5",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1)])],8,ee)]))),128))]),a.value.length>0?(g(),f("div",te,[k(I,{modelValue:m.value,"onUpdate:modelValue":e[2]||(e[2]=d=>m.value=d),onCorrect:q,onIncorrect:D,ref_key:"captchaRef",ref:_},null,8,["modelValue"])])):y("",!0),t("div",se,[t("button",{onClick:P,disabled:a.value.length===0||u.value||!m.value,class:j(["btn-primary",{"opacity-50 cursor-not-allowed":a.value.length===0||u.value||!m.value}])},[u.value?(g(),f("svg",ae,[...e[8]||(e[8]=[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):y("",!0),F(" "+c(u.value?"Convertendo...":"Converter para PDF/A"),1)],10,oe)])])):y("",!0)])]),t("div",re,[t("div",ne,[t("div",le,[t("div",ie,c(((o=h.value)==null?void 0:o.daily_limit)||10),1),e[9]||(e[9]=t("div",{class:"text-sm text-gray-500"},"Limite Diário",-1))])]),t("div",de,[t("div",ce,[t("div",ue,c(((r=h.value)==null?void 0:r.today_conversions)||0),1),e[10]||(e[10]=t("div",{class:"text-sm text-gray-500"},"Utilizadas Hoje",-1))])]),t("div",ve,[t("div",me,[t("div",pe,c(((n=h.value)==null?void 0:n.remaining_conversions)||0),1),e[11]||(e[11]=t("div",{class:"text-sm text-gray-500"},"Restantes",-1))])])]),t("div",fe,[k(l,{to:"/",class:"btn bg-gray-700 text-gray-300 hover:bg-gray-600"},{default:N(()=>[...e[12]||(e[12]=[F(" ← Voltar para Ferramentas ",-1)])]),_:1})])])])])}}});export{we as default};
